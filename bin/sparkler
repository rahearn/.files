#!/bin/bash

if ! [ -z $1 ]
then
  tag_search="-t ${1}"
else
  tag_search=''
fi

timesheets=$(
  clocker ls $tag_search | \
  tail -n 80 | \
  grep -o -E '\([0-9:]+\)' | \
  sed -E 's/\(|\)/ /g' | \
  sed -E 's/:/ /g' | \
  awk '{print $1 * 60 * 60 + $2 * 60 + $3}'
)

echo $timesheets | spark
